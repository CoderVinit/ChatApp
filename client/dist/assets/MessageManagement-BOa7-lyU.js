import{r as n,j as e,n as l,S as c}from"./index-Dm6jrkaa.js";import{c as p}from"./index-DpHtcuSt.js";import{a as f,t as h,h as w,F as g,B as u}from"./Features-M4ODAUeT.js";import{R as N}from"./RenderAttachments-CHbGAufO.js";import{T as x}from"./Table-C1-iiMlG.js";import{A as C}from"./AdminLayout-CQa5_hp2.js";import{A as b}from"./Avatar-BOgCjYz0.js";import"./Modal-DKikbja4.js";import"./Typography-BNMws05L.js";import"./Container-_t8TImdz.js";import"./TextField-TzJcuXm1.js";import"./isMuiElement-DExMpYSc.js";import"./Menu-BqoZ4b2f.js";import"./IconButton-CjltV93Y.js";import"./Tooltip-mdcBTkzG.js";import"./Toolbar-DFr84wlo.js";import"./MenuItem-msHtV5-r.js";import"./Button-Cbi2cfxC.js";import"./InputAdornment-B4VayVUC.js";import"./ExitToApp-oEY90qON.js";const j=[{field:"id",headerName:"ID",headerClassName:"table-header",width:200},{field:"attachments",headerName:"Attachments",headerClassName:"table-header",width:200,renderCell:a=>{const{attachments:s}=a.row;return(s==null?void 0:s.length)>0?s.map(o=>{const r=g(o);return e.jsx(u,{children:e.jsx("a",{href:o,download:!0,target:"_blank",rel:"noreferrer",style:{color:"black"},children:N(r,o)})})}):"No attachments"}},{field:"content",headerName:"Content",headerClassName:"table-header",width:400},{field:"sender",headerName:"Sent By",headerClassName:"table-header",width:200,renderCell:a=>e.jsxs(c,{direction:"row",alignItems:"center",spacing:2,children:[e.jsx(b,{alt:a.row.sender.name,src:a.row.sender.avatar}),e.jsx("span",{children:a.row.sender.name})]})},{field:"chat",headerName:"Chat",headerClassName:"table-header",width:220},{field:"groupChat",headerName:"Group Chat",headerClassName:"table-header",width:100},{field:"createdAt",headerName:"Time",headerClassName:"table-header",width:250}],J=()=>{const[a,s]=n.useState([]),{loading:o,data:r,error:m}=p("http://localhost:4000/api/v1/admin/messages","dashboard-messages");return f([{isError:m,error:m}]),n.useEffect(()=>{var d;r&&s((d=r==null?void 0:r.messages)==null?void 0:d.map(t=>({...t,key:t._id,id:t._id,attachments:t.attachments.map(i=>h(i.url,50)),sender:{name:t.sender.name,avatar:h(t.sender.avatar,50)},createdAt:w(t.createdAt).format("MMMM Do YYYY, h:mm:ss, a")})))},[r]),e.jsx(C,{children:o?e.jsx(l,{height:"100vh"}):e.jsx(x,{heading:"All Messages",column:j,row:a,rowHeight:200})})};export{J as default};
